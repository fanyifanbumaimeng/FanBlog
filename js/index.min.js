function waterFall(t,e,n){if(t){e=e||10,n=n||t.getElementsByTagName("div");for(var r=t,o=n,a=o[0].offsetWidth,s=r.offsetWidth,i=Math.floor(s/a),u=Math.floor((s-i*a)/(i+1)),l=new Array,f=o.length,c=0,p=0;p<i;p++)l[p]=new Array,l[p].top=e,l[p].left=a*p+u*(p+1);for(var p=0;p<f;p++){var h=p+1;h%i==0?sub=i:sub=h%i,_this=o,_this[p].style.position="absolute",_this[p].style.top=l[sub-1].top+"px",_this[p].style.left=l[sub-1].left+"px",l[sub-1].top+=_this[p].offsetHeight+e}for(var p=0;p<i;p++)l[p].top>c&&(c=l[p].top);r.style.height=c+"px"}}function tranMatrix(){for(var t=0;t<projectItems.length;t++)~function(t){var e=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.scrollTop||document.body.scrollTop,r=utils.offset(projectItems[t]).top,o=projectItems[t].offsetHeight,a=3*(o+r-e-n)/o;if(r-2*o<=e+n){if(a*=-1,a=a>=1?1:a,o>=a&&a>=0){var s="matrix("+a+",0,0,"+a+",0,0)";utils.setCss(projectItems[t],"transform",s),utils.setCss(projectItems[t],"opacity",a)}}else utils.setCss(projectItems[t],"transform","matrix(1,0,0,1,0,0)")}(t)}var utils={listToArray:function(t){var e=[];try{e=Array.prototype.slice.call(t,0)}catch(n){for(var r=0;r<t.length;r++)e[e.length]=t[r]}return e},toJSON:function toJSON(str){return"JSON"in window?JSON.parse(str):eval("("+str+")")},getWin:function(t,e){return"undefined"==typeof e?document.documentElement[t]||document.body[t]:(document.documentElement[t]=e,void(document.body[t]=e))},getCss:function(t,e){var n=reg=null;return"getComputedStyle"in window?n=window.getComputedStyle(t,null)[e]:"opacity"===e?(n=t.currentStyle.filter,reg=/^alpha\(opacity=(\d+(?:\.\d+)?)\)$/,n=reg.test(n)?reg.exec(n)[1]/100:1):n=t.currentStyle[e],reg=/^-?\d+(\.\d+)?(px|pt|em|rem)?$/,reg.test(n)?parseFloat(n):n},offset:function(t){for(var e=t.offsetTop,n=t.offsetLeft,r=t.offsetParent;r;)navigator.userAgent.indexOf("MSIE 8.0")===-1&&(e+=r.clientTop,n+=r.clientLeft),e+=r.offsetTop,n+=r.offsetLeft,r=r.offsetParent;return{top:e,left:n}},prev:function(t){if("previousElementSibling"in t)return t.previousElementSibling;for(var e=t.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e},prevAll:function(t){for(var e=[],n=this.prev(t);n;)e.unshift(n),n=this.prev(n);return e},next:function(t){if("nextElementSibling"in t)return t.nextElementSibling;for(var e=t.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e},nextAll:function(t){for(var e=[],n=this.next(t);n;)e[e.length]=n,n=this.next(n);return e},sibling:function(t){var e=this.prev(t),n=this.next(t),r=[];return e?r[r.length]=e:null,n?r[r.length]=n:null,r},siblings:function(t){return this.prevAll(t).concat(this.nextAll(t))},getIndex:function(t){return this.prevAll(t).length},hasClass:function(t,e){var n=new RegExp("(?:^| +)"+e+"(?: +|$)");return n.test(t.className)},addClass:function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(?:^| +)"+e+"(?: +|$)","g");t.className=t.className.replace(n," ")}},children:function(t,e){for(var n=t.childNodes,r=[],o=0;o<n.length;o++){var a=n[o];if(1===a.nodeType){if("undefined"!=typeof e){var s=new RegExp("^"+e+"$","i");s.test(a.tagName)?r[r.length]=a:null;continue}r[r.length]=a}}return r},getElementsByClass:function(t,e){if(e=e||document,"getElementsByClassName"in document)return this.listToArray(e.getElementsByClassName(t));var n=e.getElementsByTagName("*"),r=[];t=t.replace(/(^ +| +$)/g,"").split(/ +/);for(var o=0;o<n.length;o++){for(var a=n[o],s=a.className,i=!0,u=0;u<t.length;u++){var l=new RegExp("(?:^| +)"+t[u]+"(?: +|$)");if(!l.test(s)){i=!1;break}}i?r[r.length]=a:null}return r},getCss:function(t,e){var n=/^-?\d+(\.\d+)?(?:px|em|pt|deg|rem)?$/,r=null;if(/MSIE (?:6|7|8)/.test(window.navigator.userAgent)){if("opacity"===e){r=t.currentStyle.filter;var o=/^alpha\(opacity=(\d+(\.\d+)?)\)/;return o.test(r)?RegExp.$1/100:1}r=t.currentStyle[e]}else r=window.getComputedStyle(t,null)[e];return n.test(r)?parseFloat(r):r},setCss:function(t,e,n){if("opacity"==e)return void(/MSIE (?:6|7|8)/.test(window.navigator.userAgent)?t.style.filter="alpha(opacity="+100*n+")":t.style.opacity=n);if("float"===e)return t.style.cssFloat=n,void(t.style.styleFloat=n);var r=/^(width|height|left|top|right|bottom|(margin|padding)(Top|Bottom|Left|Right)?)$/;r.test(e)&&(isNaN(n)||(n+="px")),t.style[e]=n},setGroupCss:function(t,e){if(e=e||"0","[object Object]"==e.toString())for(var n in e)e.hasOwnProperty(n)&&this.setCss(t,n,e[n])},trottle:function(t,e,n){var r,o=null;return function(){var a=this,s=arguments,i=+new Date;clearTimeout(o),r||(r=i),i-r>=n?(t.apply(a,s),r=i):o=setTimeout(function(){t.apply(a,s)},e)}}};~function(){for(var t,e=["Array","Boolean","Date","Number","Object","RegExp","String","Window","HTMLDocument"],n=0;t=e[n++];)utils["is"+t]=function(t){return function(e){return Object.prototype.toString.call(e)=="[object "+t+"]"}}(t)}(),~function(){function t(t,n,r,o,a){var s=e.Linear;if("number"==typeof o)switch(o){case 0:s=e.Linear;break;case 1:s=e.Bounce.easeIn;break;case 2:s=e.Quart.easeInOut}else o instanceof Array?s=o.length>=2?e[o[0]][o[1]]:e[o[0]]:"function"==typeof o&&(a=o);window.clearInterval(t.zhufengTimer);var i={},u={},l=0,f=10;for(var c in n)n.hasOwnProperty(c)&&(i[c]=utils.getCss(t,c),u[c]=n[c]-i[c]);t.zhufengTimer=window.setInterval(function(){if(l+=f,l>=r)return window.clearInterval(t.zhufengTimer),utils.setGroupCss(t,n),void("function"==typeof a&&a.call(t));for(var e in n)if(n.hasOwnProperty(e)){var o=s(l,i[e],u[e],r);utils.setCss(t,e,o)}},f)}var e={Linear:function(t,e,n,r){return n*t/r+e},Bounce:{easeIn:function(t,n,r,o){return r-e.Bounce.easeOut(o-t,0,r,o)+n},easeOut:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,n,r,o){return t<o/2?.5*e.Bounce.easeIn(2*t,0,r,o)+n:.5*e.Bounce.easeOut(2*t-o,0,r,o)+.5*r+n}},Quad:{easeIn:function(t,e,n,r){return n*(t/=r)*t+e},easeOut:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},easeInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,n,r){return n*(t/=r)*t*t+e},easeOut:function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e},easeInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,n,r){return n*(t/=r)*t*t*t+e},easeOut:function(t,e,n,r){return-n*((t=t/r-1)*t*t*t-1)+e},easeInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},easeOut:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},easeInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+e},easeOut:function(t,e,n,r){return n*Math.sin(t/r*(Math.PI/2))+e},easeInOut:function(t,e,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+e}},Expo:{easeIn:function(t,e,n,r){return 0==t?e:n*Math.pow(2,10*(t/r-1))+e},easeOut:function(t,e,n,r){return t==r?e+n:n*(-Math.pow(2,-10*t/r)+1)+e},easeInOut:function(t,e,n,r){return 0==t?e:t==r?e+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e}},Circ:{easeIn:function(t,e,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOut:function(t,e,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOut:function(t,e,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Back:{easeIn:function(t,e,n,r,o){return void 0==o&&(o=1.70158),n*(t/=r)*t*((o+1)*t-o)+e},easeOut:function(t,e,n,r,o){return void 0==o&&(o=1.70158),n*((t=t/r-1)*t*((o+1)*t+o)+1)+e},easeInOut:function(t,e,n,r,o){return void 0==o&&(o=1.70158),(t/=r/2)<1?n/2*(t*t*(((o*=1.525)+1)*t-o))+e:n/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e}},Elastic:{easeIn:function(t,e,n,r,o,a){if(0==t)return e;if(1==(t/=r))return e+n;a||(a=.3*r);var s;return!o||o<Math.abs(n)?(o=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/o),-(o*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/a))+e},easeOut:function(t,e,n,r,o,a){if(0==t)return e;if(1==(t/=r))return e+n;a||(a=.3*r);var s;return!o||o<Math.abs(n)?(o=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*t)*Math.sin((t*r-s)*(2*Math.PI)/a)+n+e},easeInOut:function(t,e,n,r,o,a){if(0==t)return e;if(2==(t/=r/2))return e+n;a||(a=r*(.3*1.5));var s;return!o||o<Math.abs(n)?(o=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/o),t<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/a))+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/a)*.5+n+e}}};window.fanAnimate=t}();var projectGallary=document.getElementById("projectGallary"),projectItems=utils.getElementsByClass("projectItems",projectGallary);window.onload=function(){waterFall(projectGallary,20,projectItems)},window.onresize=function(){console.log(),waterFall(projectGallary,20,projectItems)},window.onscroll=tranMatrix,~function(){function t(t,e){var n=t.offsetWidth,r=t.offsetHeight,o=utils.offset(t).left+n/2-e.pageX,a=utils.offset(t).top+r/2-e.pageY;return Math.round((180*Math.atan2(a,o)/Math.PI+180)/90)%4}for(var e=projectItems,n=(projectGallary.getElementsByTagName("img"),document.getElementsByClassName("projectMark")),r=e.length,o=0;o<r;o++)~function(r){e[r].onmouseenter=function(o){var o=o||window.event,a=t(this,o);switch(a){case 0:n[r].style.left=e[r].offsetWidth+"px",n[r].style.top="0";break;case 1:n[r].style.left="0",n[r].style.top=e[r].offsetHeight+"px";break;case 2:n[r].style.left=-e[r].offsetWidth+"px",n[r].style.top="0";break;case 3:n[r].style.left="0",n[r].style.top=-e[r].offsetHeight+"px"}fanAnimate(n[r],{left:0,top:0},200)}}(o),~function(r){e[r].onmouseleave=function(o){console.log(1);var o=o||window.event,a=t(this,o);switch(a){case 0:fanAnimate(n[r],{left:e[r].offsetWidth,top:0},200);break;case 1:fanAnimate(n[r],{left:0,top:e[r].offsetHeight},200);break;case 2:fanAnimate(n[r],{left:-e[r].offsetWidth,top:0},200);break;case 3:fanAnimate(n[r],{left:0,top:-e[r].offsetHeight},200)}}}(o)}();